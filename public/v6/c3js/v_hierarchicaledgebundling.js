function updateVtypeChange(t){json_source=JSON.parse(t),svg.selectAll("*").remove(),svgg=svg.append("svg:g").attr("transform","translate("+rx+","+ry+")"),svgg.append("svg:path").attr("class","arc").attr("d",d3.svg.arc().outerRadius(ry-120).innerRadius(0).startAngle(0).endAngle(2*Math.PI)).on("mousedown",mousedown9),start(json_source)}function start(t){var e=cluster.nodes(t),n=packages.imports(e),r=bundle(n),a=svgg.selectAll("path.link").data(n).enter().append("svg:path").attr("class",function(t){return"link source-"+t.source.name+" target-"+t.target.name}).attr("d",function(t,e){return line(r[e])});svgg.selectAll("g.d3node").data(e.filter(function(t){return!t.children})).enter().append("svg:g").attr("class","d3node").attr("id",function(t){return"node-"+t.name}).attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).append("svg:text").attr("dx",function(t){return t.x<180?8:-8}).attr("dy",".31em").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?null:"rotate(180)"}).text(function(t){return t.name}).on("mouseover",mouseover9).on("mouseout",mouseout9),d3.select("input[type=range]").on("change",function(){line.tension(this.value/100),a.attr("d",function(t,e){return line(r[e])})}),d3.select(window).on("mousemove",mousemove9).on("mouseup",mouseup9)}function mouse9(t){return[t.pageX-rx,t.pageY-ry]}function mousedown9(){m0=mouse9(d3.event),d3.event.preventDefault()}function mousemove9(){if(m0){var t=mouse9(d3.event),e=180*Math.atan2(cross(m0,t),dot(m0,t))/Math.PI;d3.select("#chat").style("-webkit-transform","translateY("+(ry-rx)+"px)rotateZ("+e+"deg)translateY("+(rx-ry)+"px)")}}function mouseup9(){if(m0){var t=mouse9(d3.event),e=180*Math.atan2(cross(m0,t),dot(m0,t))/Math.PI;rotate+=e,rotate>360?rotate-=360:rotate<0&&(rotate+=360),m0=null,d3.select("#chat").style("-webkit-transform",null),svgg.attr("transform","translate("+rx+","+ry+")rotate("+rotate+")").selectAll("g.d3node text").attr("dx",function(t){return(t.x+rotate)%360<180?8:-8}).attr("text-anchor",function(t){return(t.x+rotate)%360<180?"start":"end"}).attr("transform",function(t){return(t.x+rotate)%360<180?null:"rotate(180)"})}}function mouseover9(t){svgg.selectAll("path.link.target-"+t.name).classed("target",!0).each(updateNodes9("source",!0)),svgg.selectAll("path.link.source-"+t.name).classed("source",!0).each(updateNodes9("target",!0))}function mouseout9(t){svgg.selectAll("path.link.source-"+t.name).classed("source",!1).each(updateNodes9("target",!1)),svgg.selectAll("path.link.target-"+t.name).classed("target",!1).each(updateNodes9("source",!1))}function updateNodes9(t,e){return function(n){e&&this.parentNode.appendChild(this),svgg.select("#node-"+n[t].name).classed(t,e)}}function cross(t,e){return t[0]*e[1]-t[1]*e[0]}function dot(t,e){return t[0]*e[0]+t[1]*e[1]}document.getElementById("hierarchicaledgebundling_range").style.display="",w=ow,h=oh;var rx=w/2,ry=h/2,m0,rotate=0,splines=[],cluster=d3.layout.cluster().size([360,ry-120]).sort(function(t,e){return d3.ascending(t.name,e.name)}),bundle=d3.layout.bundle(),line=d3.svg.line.radial().interpolate("bundle").tension(.85).radius(function(t){return t.y}).angle(function(t){return t.x/180*Math.PI}),div=document.getElementById("chat");svg&&svg.remove(),svg=d3.select("#chat").append("svg:svg").attr("width",w).attr("height",w),svgg=svg.append("svg:g").attr("transform","translate("+rx+","+ry+")"),svgg.append("svg:path").attr("class","arc").attr("d",d3.svg.arc().outerRadius(ry-120).innerRadius(0).startAngle(0).endAngle(2*Math.PI)).on("mousedown",mousedown9),function(){packages={imports:function(t){var e={},n=[];return t.forEach(function(t){e[t.name]=t}),t.forEach(function(t){t.imports&&t.imports.forEach(function(r){n.push({source:e[t.name],target:e[r.substring(r.lastIndexOf(".")+1)]})})}),n}}}(),json_source?start(json_source):d3.json(document.getElementById("jsonsource").value,function(t){start(t)});