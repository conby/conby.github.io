function updateVtypeChange(t){json_source=JSON.parse(t);var n=json_source;svg.selectAll("*").remove(),svgg=svg.append("svg:g").attr("transform","translate("+(w-r)/2+","+(h-r)/2+")"),start(n)}function start(t){node=root=t;var r=pack.nodes(root);svgg.selectAll("circle").data(r).enter().append("svg:circle").attr("class",function(t){return t.children?"parent":"child"}).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r}).on("click",function(t){return zoom5(node==t?root:t)}),svgg.selectAll("text").data(r).enter().append("svg:text").attr("class",function(t){return t.children?"parent":"child"}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("dy",".35em").attr("text-anchor","middle").style("opacity",function(t){return t.r>20?1:0}).text(function(t){return t.name}),d3.select(window).on("click",function(){zoom5(root)})}function zoom5(t,n){var e=r/t.r/2;x.domain([t.x-t.r,t.x+t.r]),y.domain([t.y-t.r,t.y+t.r]);var a=svgg.transition().duration(d3.event.altKey?7500:750);a.selectAll("circle").attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return y(t.y)}).attr("r",function(t){return e*t.r}),a.selectAll("text").attr("x",function(t){return x(t.x)}).attr("y",function(t){return y(t.y)}).style("opacity",function(t){return e*t.r>20?1:0}),node=t,d3.event.stopPropagation()}var r;w=ow,h=oh,r=700,x=d3.scale.linear().range([0,r]),y=d3.scale.linear().range([0,r]);var pack=d3.layout.pack().size([r,r]).value(function(t){return t.size});svg&&svg.remove(),svg=d3.select("#chat").append("svg:svg","h2").attr("width",w).attr("height",h),svgg=svg.append("svg:g").attr("transform","translate("+(w-r)/2+","+(h-r)/2+")"),json_source?start(json_source):d3.json(document.getElementById("jsonsource").value,function(t){start(t)});